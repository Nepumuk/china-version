<!doctype html>
<html>

    <head>
        <title>My experiment</title>
        <!-- Load jQuery -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <!-- requires jQuery UI library as well -->
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
        <!-- Load the jspsych library and plugins -->
        <script src="scripts/jspsych.js"></script>
        <script src="scripts/plugins/jspsych-text.js"></script>
        <script src="scripts/plugins/jspsych-single-stim.js"></script>
        
        <link href="css/jspsych.css" rel="stylesheet" type="text/css"></link>
    </head>

    <body>
        <div id="jspsych_target"></div>
    </body>
    <script>
        // Experiment Instructions
        var welcome_message = "<div id='instructions'><p>Welcome to the " +
            "experiment. Press enter to begin.</p></div>";

           
	var before_begin = "<div id='instructions'><p>Before you begin, please keep in mind that " +
		"there are no right or wrong answers " +
	    	"for each question choose the option that you prefer most. Press enter to begin.</p>";
	 
  	//RING Measure

	var instructions_RM = "<div id='instructions'><p>In this task you have been randomly " +
    		"paired with another person, whom we will refer to simply as the other. This other person " +
   		"is someone you do not know and will remain mutually anonymous. " +
   		"All of your choices are completely confidential. " +
   		"You will be making a series of choices about allocating resources between you and this anonymous " +
   		"other person. " +
   		"You will indicate your choices by pressing the left or right arrow key on each of the following questions. " + 
   		"Press the left arrow key if you want to choose Option A. " +
   		"Press the right arrow key if you want to choose Option B. " +
   		"Your decisions will yield money for both yourself and the other person. " +
   		"In the example below, a person has chosen to distribute money so that he/she receives 100 points, " +
   		"where as the anonymous other person receives 80 points." +
   		"To highlight the choice column B has been circled. " +
   		"</p><p><img src='Ring Measure/Ring Measure Beispiel.gif'></p><p>" +
   		"Remember you have to use the arrow keys to indicate your choice. " +
   		"As you can see, your choices will influence both the amount of money you receive" +
   		"and the amount of money the other receives. " +
		"Press enter to begin.</p>";

	//Allocationtask Instruction
	var instructions_AT = "<div id='instructions'><p>In the following tasks you will again be paired with " +
		"an anonymous other person. You will be making a series of choices about allocating resources " +
		"between you and this other person. This other person " +
   		"is someone you do not know and will remain mutually anonymous. " +
   		"All of your choices are completely confidential. " +
   		"You will indicate your choices by pressing the left or right arrow key on each of the following questions. " + 
   		"Press the left arrow key if you want to choose Option A. " +
   		"Press the right arrow key if you want to choose Option B. " +
   		"Your decisions will yield money for both yourself and the other person. " +
   		"The options show the payment you will receive, the payment of the other, " +
   		"the total amount of money and the difference between your payment and the payment of the other person. " +
   		"Together you receive 180 points and the difference between your payment and the payment of the other " +
   		"person is 20 points." + 
   		"In the example below, a person has chosen to distribute money so that he/she receives 100 points, " +
   		"where as the anonymous other person receives 80 points." +
   		"To highlight the choice column B has been circled. " +
   		"</p><p><img src='Allocation Task/Allocation_Task_Beispiel.gif'></p><p>" +
   		"Remember you have to use the arrow keys to indicate your choice. " +
   		"As you can see, your choices will influence both the amount of money you receive" +
   		"and the amount of money the other receives. " +
   		"For your participation in this study you will receive a basic payment," +
   		"but the choices you make will influence your bonus payment as well as the bonus payment of the other person. " +
   		"Each point equals one cent, e.g. 80 points = 80 cents. " +
		"Press enter to begin.</p>";
	

        //Ringmeasure
        var n_trials2 = 24;
        var stimuli2 = ["Ring Measure/Ring Measure 1.gif", "Ring Measure/Ring Measure 2.gif", "Ring Measure/Ring Measure 3.gif", "Ring Measure/Ring Measure 4.gif", 
        "Ring Measure/Ring Measure 5.gif", "Ring Measure/Ring Measure 6.gif", "Ring Measure/Ring Measure 7.gif", "Ring Measure/Ring Measure 8.gif", "Ring Measure/Ring Measure 9.gif", 
        "Ring Measure/Ring Measure 10.gif", "Ring Measure/Ring Measure 11.gif","Ring Measure/Ring Measure 12.gif","Ring Measure/Ring Measure 13.gif", "Ring Measure/Ring Measure 14.gif",
        "Ring Measure/Ring Measure 15.gif", "Ring Measure/Ring Measure 16.gif", "Ring Measure/Ring Measure 17.gif", "Ring Measure/Ring Measure 18.gif", 
        "Ring Measure/Ring Measure 19.gif", "Ring Measure/Ring Measure 20.gif", "Ring Measure/Ring Measure 21.gif", "Ring Measure/Ring Measure 22.gif", 
        "Ring Measure/Ring Measure 23.gif", "Ring Measure/Ring Measure 24.gif"];
      	var stimuli2_types = ["Ring Measure"];
      	
      	//Generating random order for Ringmeasure
        
        var stimuli2_random_order = [];
        var opt_data = [];

        for (var i = 0; i < n_trials2; i++) {
            var random_choice = Math.floor(Math.random() * stimuli2.length);

            stimuli2_random_order.push(stimuli2[random_choice]);
            opt_data.push({
                "stimulus_type": stimuli2_types[random_choice]
            });
        }

	// Allocation Tasks
	var n_trials = 25;
	var stimuli = ["Allocation Task/Allocation_Task_1.gif", "Allocation Task/Allocation_Task_2.gif", "Allocation Task/Allocation_Task_3.gif", "Allocation Task/Allocation_Task_4.gif", 
	"Allocation Task/Allocation_Task_5.gif", "Allocation Task/Allocation_Task_6.gif", "Allocation Task/Allocation_Task_7.gif", "Allocation Task/Allocation_Task_8.gif", 
	"Allocation Task/Allocation_Task_9.gif", "Allocation Task/Allocation_Task_10.gif", "Allocation Task/Allocation_Task_11.gif", "Allocation Task/Allocation_Task_12.gif",
	"Allocation Task/Allocation_Task_13.gif", "Allocation Task/Allocation_Task_14.gif", "Allocation Task/Allocation_Task_15.gif", "Allocation Task/Allocation_Task_16.gif",
	"Allocation Task/Allocation_Task_17.gif", "Allocation Task/Allocation_Task_18.gif", "Allocation Task/Allocation_Task_19.gif", "Allocation Task/Allocation_Task_20.gif", 
	"Allocation Task/Allocation_Task_21.gif", "Allocation Task/Allocation_Task_22.gif", "Allocation Task/Allocation_Task_23.gif", "Allocation Task/Allocation_Task_24.gif", 
	"Allocation Task/Allocation_Task_25.gif"];
	var stimuli_types = ["Allocation Task"];
	
	//Generating random order for Tasks
	var stimuli_random_order = [];
        var opt_data = [];

        for (var i = 0; i < n_trials; i++) {
            var random_choice = Math.floor(Math.random() * stimuli.length);

            stimuli_random_order.push(stimuli[random_choice]);
            opt_data.push({
                "stimulus_type": stimuli_types[random_choice]
            });
        }

        // Define experiment blocks
        var instruction_block = {
            type: "text",
            text: [welcome_message, instructions_RM, before_begin]
        };
        
       	var test_block_RM = {
                type: "single-stim",
                stimuli: stimuli2_random_order,
                choices: [37, 39],
                data: opt_data
        };

	var instruction2_block = {
            type: "text",
            text: [instructions_AT, before_begin]
        };
        
        var test_block_Tasks = {
                type: "single-stim",
                stimuli: stimuli_random_order,
                choices: [37, 39],
                data: opt_data
        };


        jsPsych.init({
            display_element: $('#jspsych_target'),
            experiment_structure: [instruction_block, test_block_RM, instruction2_block, test_block_Tasks],
            on_finish: function(data) {
                $("#jspsych_target").append($('<pre>', {
                    html: jsPsych.dataAsCSV()
                }));

                jsPsych.saveCSVdata("data.csv");
            }
        });
    </script>

</html>

